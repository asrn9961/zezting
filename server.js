const express=require('express');const http=require('http');const {Server}=require('socket.io');const cors=require('cors');const app=express();const server=http.createServer(app);const io=new Server(server,{cors:{origin:'*',methods:['GET','POST']}});app.use(cors());app.use(express.static('public'));let onlineUsers={};io.on('connection',socket=>{const browserName=`Browser${Math.floor(Math.random()*10000)}`;onlineUsers[socket.id]=browserName;io.emit('user-list',Object.values(onlineUsers));socket.emit('your-name',browserName);socket.on('send-message',({to,message})=>{for(const id in onlineUsers){if(onlineUsers[id]===to){io.to(id).emit('receive-message',{from:onlineUsers[socket.id],message});break;}}});socket.on('disconnect',()=>{delete onlineUsers[socket.id];io.emit('user-list',Object.values(onlineUsers));});});app.get('/',(req,res)=>res.send('Zezting Chat App is running'));server.listen(5000,()=>console.log('Server running on port 5000'));